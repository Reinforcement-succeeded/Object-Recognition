<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <!-- CSS only -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
            crossorigin="anonymous"
        />
        <!-- JavaScript Bundle with Popper -->
        <script
            class="simpson_images"
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"
        ></script>
        <title>Document</title>
        <link rel="stylesheet" href="../static/style/screens/wiki.css" />
        <link rel="stylesheet" href="../static/style/screens/modal.css" />

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </head>

    <body>
        <!-- 이미지 검색으로 돌아가기 버튼 -->
        <button onclick='window.location.href = "/"'>이미지 검색으로 돌아가기</button>
        <!-- 검색 -->
        <div class="searchBox">
            <label>Simpson name: <input type="text" id="search" onkeyup="filter()" placeholder="심슨 이름을 검색해주세요." /></label>
        </div>

        <!-- 캐릭터모음 -->
        <div class="listBox" id="firstpage">
            {% for i in range((all_comments|length)//5+1) %}
            
            <div class="d-flex flex-row justify-content-center">
                
                {%for res in all_comments[i:i+5]%}
              
                <div class="p-2">
                    <div class="listInner">
                        <span class="simpson_name"> {{res}} </span>
                        <img class="simpson_images open-popup" src="/static/images/{{res}}.png" />

                        <div class="modal">
                            <div class="modal_body">
                                <div class="modal_left">
                                    <img class="modal_img" src="/static/images/{{res}}.png" />
                                </div>
                                <div class="modal_right">
                                    <button class="close-popup close1"></button>
                                    <br />
                                    <br />
                                    <div class="text">
                                        <p><b> {{res}} </b></p>

                                        <p><b>I used to be with it. But then they changed what it was. Now what I'm with isn't it, and what's it seems scary and wierd. It'll happen to you.</b></p>
                                        {% for res_plus in all_comments[res]%}
                                        <p><b> {{res_plus}} </b></p>
                                        <div id="comment-box">
                                            <div>
                                                <p>
                                                    <button class="delete-btn" onclick="delete_comment('${num}')">삭제</button>
                                                </p>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                    <div class="comment">
                                        <input style="width: 440px; height: 40px; border-radius: 0" placeholder="캐릭터 한줄 평 입력" id="comments" type="text" />
                                        <button style="cursor: pointer; width: 64px; border-radius: 0" onclick="save_comment()">게시</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                {%endfor%}
                
                
                

               

            </div>
            {% endfor %}
            
        </div>

        <script>
            function filter() {
                let search = document.getElementById('search').value.toLowerCase();
                let listInner = document.getElementsByClassName('listInner');

                for (let i = 0; i < listInner.length; i++) {
                    simpson_name = listInner[i].getElementsByClassName('simpson_name');
                    if (simpson_name[0].innerHTML.toLowerCase().indexOf(search) != -1) {
                        listInner[i].style.display = 'flex';
                    } else {
                        listInner[i].style.display = 'none';
                    }
                }
            }
        </script>
        <script defer src="/static/scripts/modal.js"></script>
        <script defer src="/static/scripts/comment.js"></script>
    </body>
</html>
